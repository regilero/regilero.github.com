<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> Separate cache Backends with Drupal6 and Drupal7. |  RBleug</title>
    <meta name="description" content="Regilero's blog; Mostly tech things about web stuff."/>
    <meta name="author" content="regilero"/>
    <link rel="author" href="/contact/" title="who am I?" type="text/html" />
    <link rel="icon" type="image/x-icon" href="/theme/img/regilero.ico" />
    <link rel="shortcut icon" type="image/x-icon" href="/theme/img/regilero.ico" />
    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed.xml" />
    <link rel="stylesheet" href="/theme/bootstrap/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/theme/bootstrap/css/bootstrap-theme.min.css" type="text/css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
<!--
    <link rel="stylesheet" href="/theme/blueprint/screen.css" type="text/css" media="screen, projection">
    <link rel="stylesheet" href="/theme/blueprint/print.css" type="text/css" media="print">
    <link rel="stylesheet" href="/theme/syntax.css" type="text/css" />
    <!--[if lt IE 8]>
      <link rel="stylesheet" href="/theme/blueprint/ie.css" type="text/css" media="screen, projection">
    <![endif]-->
<!--
    <link rel="stylesheet" href="/theme/blueprint/plugins/link-icons/screen.css" type="text/css" media="screen, projection">
    <link rel="stylesheet" href="/theme/fontello/css/fontello.css">
    <!--[if IE 7]><link rel="stylesheet" href="/theme/fontello/css/fontello-ie7.css"><![endif]-->
    <link href="/theme/syntax.css" rel="stylesheet" type="text/css" />
    <link href="/theme/style.css" rel="stylesheet" type="text/css" />

  </head>
  <body>
    <div class="topNav navbar navbar-inverse navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand visible-xs-inline" href="#">Navigation</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li ><a href="/" class="glyphicon glyphicon-home">&nbsp;Home</a></li>
            <li class="active"><a href="/archives/" class="glyphicon glyphicon-th">&nbsp;Archives</a></li>
            <li ><a href="/contact/" class="glyphicon glyphicon-earphone">&nbsp;Contact</a></li>
            <li><a class="glyphicon glyphicon-eye-open" href="/feed.xml">&nbsp;RSS Feed</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

  <div class="container" role="main">
  
    <div class="jumbotron">
      <div class="container">
         <div id="branding">
           <h1 class="logo"><a href="/">RBleug</a></h1>
           <hr/>
           <h2 class="alt">Regilero's blog; Mostly tech things about web stuff.</h2>
         </div>
       </div>
     </div>

    <div class="row">
      <div class="col-md-8" id="left-content">

          <article>
        <header>
            <div class="page-header">
            <h1>Separate cache Backends with Drupal6 and Drupal7.
            <br/><span><i class="glyphicon glyphicon-time">&nbsp;</i><time datetime="2011-10-03">Oct 03, 2011</time></span>
            <span class="category"><i class="glyphicon glyphicon-list">&nbsp;</i> <a href="/drupal/">drupal</a> and <a href="/english/">english</a></span>
            </h1>
            </div>
        </header>

        <div class="entry">
         <div class="col-md-6">
          <div class="post-excerpt-full">
          Detailled explanation on how to split Drupal's cache tables on several devices, as each cache does not need the same speed and/or capacity.
          </div>
          <div id="post-toc">
          </div>
         </div>
         <div class="col-md-6">
          <img class="topimg" src="/theme/img/pic/old12.jpg" alt="Detailled explanation on how to split Drupal's cache tables on several devices, as each cache does not need the same speed and/or capacity." title="Detailled explanation on how to split Drupal's cache tables on several devices, as each cache does not need the same speed and/or capacity." />
         </div>
         <div class="row">
          <div class="col-md-12" id="post-full">
       
          <p>Drupal use a lot of caches at different levels but all of them are by default stored in the database.</p>

<p>In this article we'll study how to push all these caches in better places.</p>

<p>This is a new feature of default Drupal7, but simple solutions are available if you want the same thing on a Drupal6 installation.</p>

<h3>The default situation</h3>

<p>Take your Drupal Database and check what are the cache tables used, here I'll use a quite basic default Drupal installation on Drupal6:</p>

<div class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">show</span> <span class="n">tables</span> <span class="k">like</span> <span class="s1">&#39;cache%&#39;</span><span class="p">;</span>
<span class="o">+</span><span class="c1">---------------------------+</span>
<span class="o">|</span> <span class="n">Tables_in_expat6</span> <span class="p">(</span><span class="k">cache</span><span class="o">%</span><span class="p">)</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------------------------+</span>
<span class="o">|</span> <span class="k">cache</span>                     <span class="o">|</span>
<span class="o">|</span> <span class="n">cache_block</span>               <span class="o">|</span>
<span class="o">|</span> <span class="n">cache_content</span>             <span class="o">|</span>
<span class="o">|</span> <span class="n">cache_filter</span>              <span class="o">|</span>
<span class="o">|</span> <span class="n">cache_form</span>                <span class="o">|</span>
<span class="o">|</span> <span class="n">cache_menu</span>                <span class="o">|</span>
<span class="o">|</span> <span class="n">cache_page</span>                <span class="o">|</span>
<span class="o">|</span> <span class="n">cache_update</span>              <span class="o">|</span>
<span class="o">|</span> <span class="n">cache_views</span>               <span class="o">|</span>
<span class="o">|</span> <span class="n">cache_views_data</span>          <span class="o">|</span>
<span class="o">|</span> <span class="n">cache_admin_menu</span>          <span class="o">|</span>
<span class="o">+</span><span class="c1">---------------------------+</span></code></pre></div>


<p>Let's try to get more informations on theses tables with a query on the INFORMATION_SCHEMA of MySQL, here a database named mydrupal</p>

<div class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">SELECT</span> 
    <span class="o">-&gt;</span>  <span class="n">concat</span><span class="p">(</span><span class="n">table_schema</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="k">table_name</span><span class="p">)</span> <span class="n">dbtable</span><span class="p">,</span>
    <span class="o">-&gt;</span>  <span class="n">concat</span><span class="p">(</span><span class="n">round</span><span class="p">(</span><span class="n">table_rows</span><span class="o">/</span><span class="mi">1000</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="s1">&#39;K&#39;</span><span class="p">)</span> <span class="k">rows</span><span class="p">,</span>
    <span class="o">-&gt;</span>  <span class="n">concat</span><span class="p">(</span><span class="n">round</span><span class="p">(</span><span class="n">data_length</span><span class="o">/</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">),</span><span class="mi">2</span><span class="p">),</span><span class="s1">&#39;M&#39;</span><span class="p">)</span> <span class="k">DATA</span><span class="p">,</span>
    <span class="o">-&gt;</span>  <span class="n">concat</span><span class="p">(</span><span class="n">round</span><span class="p">(</span><span class="n">index_length</span><span class="o">/</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">),</span><span class="mi">2</span><span class="p">),</span><span class="s1">&#39;M&#39;</span><span class="p">)</span> <span class="n">indexes</span><span class="p">,</span>
    <span class="o">-&gt;</span>  <span class="n">concat</span><span class="p">(</span><span class="n">round</span><span class="p">((</span><span class="n">data_length</span><span class="o">+</span><span class="n">index_length</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">),</span><span class="mi">2</span><span class="p">),</span><span class="s1">&#39;M&#39;</span><span class="p">)</span> <span class="n">total_size</span><span class="p">,</span>
    <span class="o">-&gt;</span>  <span class="n">round</span><span class="p">(</span><span class="n">index_length</span><span class="o">/</span><span class="n">data_length</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="n">idxfrac</span> 
    <span class="o">-&gt;</span>  <span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">TABLES</span> 
    <span class="o">-&gt;</span>  <span class="k">WHERE</span> <span class="k">table_name</span> <span class="k">LIKE</span> <span class="s1">&#39;cache%&#39;</span>
    <span class="o">-&gt;</span>  <span class="k">AND</span> <span class="n">table_schema</span><span class="o">=</span><span class="ss">&quot;mydrupal&quot;</span>
    <span class="o">-&gt;</span>  <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">data_length</span><span class="o">+</span><span class="n">index_length</span> <span class="k">DESC</span><span class="p">;</span>
<span class="o">+</span><span class="c1">---------------------------+-------+-------+---------+------------+---------+</span>
<span class="o">|</span> <span class="n">dbtable</span>                   <span class="o">|</span> <span class="k">rows</span>  <span class="o">|</span> <span class="k">DATA</span>  <span class="o">|</span> <span class="n">indexes</span> <span class="o">|</span> <span class="n">total_size</span> <span class="o">|</span> <span class="n">idxfrac</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">---------------------------+-------+-------+---------+------------+---------+</span>
<span class="o">|</span> <span class="n">mydrupal</span><span class="p">.</span><span class="n">cache_menu</span>       <span class="o">|</span> <span class="mi">1</span><span class="p">.</span><span class="mi">02</span><span class="n">K</span> <span class="o">|</span> <span class="mi">7</span><span class="p">.</span><span class="mi">19</span><span class="n">M</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">06</span><span class="n">M</span>   <span class="o">|</span> <span class="mi">7</span><span class="p">.</span><span class="mi">26</span><span class="n">M</span>      <span class="o">|</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">01</span> <span class="o">|</span> 
<span class="o">|</span> <span class="n">mydrupal</span><span class="p">.</span><span class="n">cache_form</span>       <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="n">K</span> <span class="o">|</span> <span class="mi">4</span><span class="p">.</span><span class="mi">99</span><span class="n">M</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="n">M</span>   <span class="o">|</span> <span class="mi">5</span><span class="p">.</span><span class="mi">00</span><span class="n">M</span>      <span class="o">|</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="o">|</span> 
<span class="o">|</span> <span class="n">mydrupal</span><span class="p">.</span><span class="n">cache_update</span>     <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="n">K</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">86</span><span class="n">M</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="n">M</span>   <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">86</span><span class="n">M</span>      <span class="o">|</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">01</span> <span class="o">|</span> 
<span class="o">|</span> <span class="n">mydrupal</span><span class="p">.</span><span class="n">cache_filter</span>     <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">22</span><span class="n">K</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">49</span><span class="n">M</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">03</span><span class="n">M</span>   <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">52</span><span class="n">M</span>      <span class="o">|</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">06</span> <span class="o">|</span> 
<span class="o">|</span> <span class="n">mydrupal</span><span class="p">.</span><span class="k">cache</span>            <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="n">K</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">46</span><span class="n">M</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="n">M</span>   <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">46</span><span class="n">M</span>      <span class="o">|</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">01</span> <span class="o">|</span> 
<span class="o">|</span> <span class="n">mydrupal</span><span class="p">.</span><span class="n">cache_content</span>    <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">17</span><span class="n">K</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">35</span><span class="n">M</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="n">M</span>   <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">36</span><span class="n">M</span>      <span class="o">|</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">03</span> <span class="o">|</span> 
<span class="o">|</span> <span class="n">mydrupal</span><span class="p">.</span><span class="n">cache_views</span>      <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="n">K</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">23</span><span class="n">M</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="n">M</span>   <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">23</span><span class="n">M</span>      <span class="o">|</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">03</span> <span class="o">|</span> 
<span class="o">|</span> <span class="n">mydrupal</span><span class="p">.</span><span class="n">cache_admin_menu</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="n">K</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="n">M</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="n">M</span>   <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="n">M</span>      <span class="o">|</span>   <span class="mi">96</span><span class="p">.</span><span class="mi">00</span> <span class="o">|</span> 
<span class="o">|</span> <span class="n">mydrupal</span><span class="p">.</span><span class="n">cache_page</span>       <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="n">K</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="n">M</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="n">M</span>   <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="n">M</span>      <span class="o">|</span>    <span class="k">NULL</span> <span class="o">|</span> 
<span class="o">|</span> <span class="n">mydrupal</span><span class="p">.</span><span class="n">cache_views_data</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="n">K</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="n">M</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="n">M</span>   <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="n">M</span>      <span class="o">|</span>    <span class="k">NULL</span> <span class="o">|</span> 
<span class="o">|</span> <span class="n">mydrupal</span><span class="p">.</span><span class="n">cache_block</span>      <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="n">K</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="n">M</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="n">M</span>   <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="n">M</span>      <span class="o">|</span>    <span class="k">NULL</span> <span class="o">|</span> 
<span class="o">+</span><span class="c1">---------------------------+-------+-------+---------+------------+---------+</span>
<span class="mi">11</span> <span class="k">rows</span> <span class="k">in</span> <span class="k">set</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span></code></pre></div>


<p>So, well, here my example is a quite little website. Cache tables are small and not heavily used.
You would get bigger numbers on a big website.
But anyway, the real problem in term of performance here is not on the size of
caches or the size of the indexes, but on the number of read and write queries
running on theses tables.</p>

<p>When the website will grow you will need to activate more internal caching,
maybe you will use good modules, which make their own cache tables and use them
&amp; the existing ones to avoid recomputing all answers.
You may even use so much the cache that some queries on the website will be answered
by only requesting the cache table (aggressive cache mode with cache_page).</p>

<p>Soon enough you will ask yourself "Could I use some smarter solutions like Memcache for the cache storage?".</p>

<p>And of course some existing modules could help you doing that.
The memcache module, for example.
And the "cache router" module applied some of the ideas we'll study later on this article.</p>

<p>You may wonder why it is smart to use something which is not the database to perform the caching storage?</p>

<ul>
<li>You could maybe avoid completely the database requests in aggressive mode</li>
<li>Dedicated storage engine (cache engines) perform faster than a relational database both in write and read operations</li>
<li>Reducing the number of requests made on MySQL is very important with Drupal, where a single page can be between 50 and 250 requests. With core modules only, adding Panels, some views and some other modules and you could grow up to 600 requests.</li>
<li>data not managed in MySQl will never impact MySQL memory buffers management (smallest database will have more chances to avoid pagination)</li>
<li>In some circumstances cache tables can get a lot of write operations and the query_cache for queries on theses tables will be wiped out frequently, which is bad for the query cache ratio and usage. But this is not always true, depends a lot on your Drupal cache usages</li>
</ul>


<p>I said before cache engines can be faster in both write and read operations.
So now you may ask "why don't we use Cache engines for everything?". And the answer is that a relational database provides more services, it can for example provides a better persitency,
or manage better simultaneous writes, or allow handling relationship between objects.
<strong>Use the right tool for the right thing</strong>.
But this is still a good question. Drupal 8 studies &amp; discussions are actually requesting whether a document based backend for most Drupal storage wouldn't be  more appropriate than a relational database.
For now we'll just have a look at the cache tables problems.</p>

<h3>Cache backends with Drupal7</h3>

<p>Now comes Drupal7. The cache management has been rewritten, using cache router and memcached ideas and try to put the things one step further in the core.
Cache bins are used, for example the bin <strong>'foo'</strong> will use the cache table <strong>cache_foo</strong>.
And <strong>for each bin you can specify which storage backend will be used</strong>.</p>

<p>Available cache backends are:</p>
 * Database: the default one, like before
 * File (module filecache): a file-based storage which could be useful with fast disk storage (and a shared disk storage if you have several apache servers)
 * Apc (module apc): APC is not only an opcode (PHP code precompiler) it also  provides a local cache of shared memory. If you have several Apache servers you will have one APC cache per server, but it's not a big one, be careful (and part of the available memory space is occupied by the opcode). In case of full cache (overflow) the cache is completely wiped out, so do not use that for long persistency.
 * Memcache (module memcache): To use the well known memcached daemon. where you could use a basic mono-server setting or a complex multi-servers with replications usage</p>

<p>But other backends could be written.
And you can already find two Redis backends implementations (<strong>Predis</strong> &amp; <strong>PhpRedis</strong>) with the  <a href="http://drupal.org/project/redis">redis module</a> (alpha).
Module maintained by <strong>pounard</strong>, a Makina Corpus worker.
There is also a <a href="http://drupal.org/project/mongodb">MongoDB module</a> providing a mongodb cache backend (beta2), that I did not test yet, powered by Damien Tournoud.</p>

<h3>Having a drupal6? Or do you want some configuration details?</h3>

<p>The only thing we need know is a documentation on how to configure these.
This is always (almost) provided in the module documentation but we will use the <a href="http://drupal.org/project/cache_backport">cache backport module</a> documentation as an example.
This module, again maintained by  <strong>pounard</strong>, is a backport of Drupal7 cache engine (separating  backends) for Drupal6.
So it's a replacement for Cache Router where you can reuse the cache parts of Drupal7 cache backends in a Drupal6 website.
And One of the good points of this module is that it provides a centralized documentation on several cache backends which is spread on the different modules for Drupal7.</p>

<p>The first question is "where should I put each separate cache bin (or each cache table for short) ?"</p>

<p>The <strong>cache</strong> and <strong>cache_bootstrap</strong> bins contains short and often used data.
They will love the APC cache backend.</p>

<p>For all the others bins you could apply a different policy.
You may want to keep some bins in the database, but you should test the memcached/mongodb backend for most bins.
You could also try the filecache backend, with a modern linux kernel often used files will get mapped into memory buffers and you may get good results.</p>

<p>There is no magic rules, the best tool will depend on your cache usage and on used modules.
MySQL is already working a lot, moving all caches outside of the  database will help MySQL.
But you will need to allow some memory (server?) for these new backends, maybe some of the memory given previously to MySQl or Apache.
Keep in mind that you should never make a server swap.</p>

<p>Let's look at a complete configuration, for Drupal6 the cache backport module would require these lines:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">// Load the cache backport replacement for cache.inc:</span>
<span class="x">  $conf[&#39;cache_inc&#39;] = &#39;sites/all/modules/cache_backport/cache.inc&#39;;</span></code></pre></div>


<p>And now for Drupal7 or Drupal6 we would have (of course it depends of the bins available on your installation, check the table created in MySQL to see what bin are requested by the modules):</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">// Define cache engines:</span>
<span class="x">  // Database : &#39;DrupalDatabaseCache&#39;</span>
<span class="x">  $conf[&#39;cache_backends&#39;][] = &#39;sites/all/modules/cache_backport/database.inc&#39;;</span>
<span class="x">  // FileCache : &#39;DrupalFileCache&#39;</span>
<span class="x">  $conf[&#39;cache_backends&#39;][] = &#39;sites/all/modules/filecache/filecache.inc&#39;;</span>
<span class="x">  // APC : &#39;DrupalAPCCache&#39;</span>
<span class="x">  $conf[&#39;cache_backends&#39;][] = &#39;sites/all/modules/apc/drupal_apc_cache.inc&#39;;</span>
<span class="x">  // Memcache from drupal 7 : &#39;MemCacheDrupal&#39;</span>
<span class="x">  $conf[&#39;cache_backends&#39;][] = &#39;sites/all/modules/memcache/memcache.inc&#39;;</span>
<span class="x">  </span>
<span class="x">  // Define cache bins, here&#39;s the magic, deporting several cache on the</span>
<span class="x">  // appropriate place depending on usage frequency, size, and others:</span>
<span class="x">  // Please consider seriously doing brainstorming and benchmarking on your own</span>
<span class="x">  // since this is only an example, and sites performance may vary depending</span>
<span class="x">  // on modules and usage.</span>
<span class="x">  // Cache name |  Usage/frequency/size</span>
<span class="x">  // default    |  any/any/any          select memcache, apc, file or db</span>
<span class="x">  $conf[&#39;cache_default_class&#39;]          = &#39;DrupalDatabaseCache&#39;;</span>
<span class="x">  // WARNING: this one is &#39;cache_class_cache&#39; and not &#39;cache_class_cache_cache&#39;</span>
<span class="x">  // general    |  all/every/medium     select memcache &gt; file &gt; apc &gt; db</span>
<span class="x">  $conf[&#39;cache_class_cache&#39;]            = &#39;MemCacheDrupal&#39;;</span>
<span class="x">  // bootstrap  |  all/every/medium     select apc &gt; db</span>
<span class="x">  $conf[&#39;cache_class_cache_bootstrap&#39;]  = &#39;DrupalAPCCache&#39;;</span>
<span class="x">  // block      |  any/often/small      select memcache &gt; db &gt; file</span>
<span class="x">  $conf[&#39;cache_class_cache_block&#39;]      = &#39;MemCacheDrupal&#39;;</span>
<span class="x">  // field      |  page/some/large      select file &gt; memcache &gt; db</span>
<span class="x">  $conf[&#39;cache_class_cache_content&#39;]    = &#39;DrupalFileCache&#39;;</span>
<span class="x">  // filter     |  page/some/large      select file &gt; memcache &gt; db</span>
<span class="x">  $conf[&#39;cache_class_cache_filter&#39;]     = &#39;DrupalFileCache&#39;;</span>
<span class="x">  // form       |  edit/rare/medium     select file &gt; memcache &gt; db</span>
<span class="x">  $conf[&#39;cache_class_cache_form&#39;]       = &#39;DrupalFileCache&#39;;</span>
<span class="x">  // menu       |  any/often/large      select memcache &gt; db &gt; file</span>
<span class="x">  $conf[&#39;cache_class_cache_menu&#39;]       = &#39;MemCacheDrupal&#39;;</span>
<span class="x">  // page       |  page/often/large     select memcache &gt; file &gt; db</span>
<span class="x">  $conf[&#39;cache_class_cache_page&#39;]       = &#39;MemCacheDrupal&#39;;</span>
<span class="x">  // pathdst    |  any/some/medium      select memcache &gt; db &gt; file</span>
<span class="x">  $conf[&#39;cache_class_cache_pathdst&#39;]    = &#39;MemCacheDrupal&#39;;</span>
<span class="x">  // pathsrc    |  any/some/medium      select memcache &gt; db &gt; file</span>
<span class="x">  $conf[&#39;cache_class_cache_pathsrc&#39;]    = &#39;MemCacheDrupal&#39;;</span>
<span class="x">  // multiprice |  any/often/medium     select memcache &gt; db &gt; file</span>
<span class="x">  $conf[&#39;cache_class_cache_uc_price&#39;]   = &#39;MemCacheDrupal&#39;;</span>
<span class="x">  // update     |  system/rare/large,   select file &gt; db</span>
<span class="x">  $conf[&#39;cache_class_cache_update&#39;]     = &#39;DrupalFileCache&#39;;</span>
<span class="x">  // users      |  any/some/large       select memcache &gt; file &gt; db</span>
<span class="x">  $conf[&#39;cache_class_cache_users&#39;]      = &#39;MemCacheDrupal&#39;;</span>
<span class="x">  // views      |  any/some/large       select memcache &gt; file &gt; db</span>
<span class="x">  $conf[&#39;cache_class_cache_views&#39;]      = &#39;MemCacheDrupal&#39;;</span>
<span class="x">  // views data |  any/often/small      select apc &gt; db</span>
<span class="x">  $conf[&#39;cache_class_cache_views_data&#39;] = &#39;DrupalAPCCache&#39;;</span>
<span class="x">  </span>
<span class="x">  // Define File Cache settings:</span>
<span class="x">  // See README.TXT in FileCache directory for configuration details.</span>
<span class="x">  $conf[&#39;filecache_fast_pagecache&#39;] = TRUE; // set TRUE to enable fast page serving</span>
<span class="x">  // you will need to define your $conf[&#39;file_directory_temp&#39;] = &#39;/something/tmp&#39;;</span>
<span class="x">  // before using this line. Put the directory in a place where drupal can write</span>
<span class="x">  // (tmp, or files subdirectory) but that is not available via direct web</span>
<span class="x">  // access, default Drupal conf protects .ht* directories, so default name is</span>
<span class="x">  // .ht.filecache in the files directory if you provide no value for this setting</span>
<span class="x">  $conf[&#39;filecache_directory&#39;] = $conf[&#39;file_directory_temp&#39;] . DIRECTORY_SEPARATOR . &#39;filecache&#39;;</span>
<span class="x">  </span>
<span class="x">  // Define APC settings.</span>
<span class="x">  $conf[&#39;apc_show_debug&#39;] = FALSE; // set TRUE to enable debug mode</span>
<span class="x">  // TODO In order to use multiple Drupal instance on the same physical box,</span>
<span class="x">  // each site settings.php file should provide a bin name prefix for APC and</span>
<span class="x">  // most other bin. Currently APC is managing it internally with request&#39;s</span>
<span class="x">  // $_SERVER[&#39;PHP_HOST&#39;]. </span>
<span class="x">  </span>
<span class="x">  // Define Memcache settings.</span>
<span class="x">  /* in case you use php-memcached and not php-memcache (for this one use php.ini settings)</span>
<span class="x">  $conf[&#39;memcache_options&#39;] = array(</span>
<span class="x">    Memcached::OPT_BINARY_PROTOCOL =&gt; FALSE, // set TRUE to enable binary protocol when using memcached &gt;= 1.4</span>
<span class="x">    Memcached::OPT_COMPRESSION =&gt; FALSE, // set FALSE to disable compression for improved performance</span>
<span class="x">    Memcached::OPT_DISTRIBUTION =&gt; Memcached::DISTRIBUTION_CONSISTENT, // set consistent distribution</span>
<span class="x">    Memcached::OPT_HASH =&gt; Memcached::HASH_CRC, // set CRC32 hash method</span>
<span class="x">    Memcached::OPT_CONNECT_TIMEOUT =&gt; 1000, // connection timeout in milliseconds</span>
<span class="x">    Memcached::OPT_SERVER_FAILURE_LIMIT =&gt; 5, // failure limit for server connection attempts</span>
<span class="x">  );*/</span>
<span class="x">  // This is not necessary if you have only 1 memcached server on default port</span>
<span class="x">  // (11211) but could be used to map &amp; replicate bins between several servers</span>
<span class="x">  // (see memcached module documentation).</span>
<span class="x">  $conf[&#39;memcache_servers&#39;] = array(</span>
<span class="x">    &#39;127.0.0.1:11211&#39; =&gt; &#39;default&#39;,</span>
<span class="x">  );</span>
<span class="x">  // comment cache bins not used with memcached</span>
<span class="x">  $conf[&#39;memcache_bins&#39;] = array(</span>
<span class="x">    &#39;cache&#39;            =&gt; &#39;default&#39;,</span>
<span class="x">    //&#39;cache_bootstrap&#39;  =&gt; &#39;default&#39;,</span>
<span class="x">    &#39;cache_block&#39;      =&gt; &#39;default&#39;,</span>
<span class="x">    //&#39;cache_content&#39;    =&gt; &#39;default&#39;,</span>
<span class="x">    //&#39;cache_filter&#39;     =&gt; &#39;default&#39;,</span>
<span class="x">    //&#39;cache_form&#39;       =&gt; &#39;default&#39;,</span>
<span class="x">    &#39;cache_menu&#39;       =&gt; &#39;default&#39;,</span>
<span class="x">    &#39;cache_page&#39;       =&gt; &#39;default&#39;,</span>
<span class="x">    &#39;cache_pathdst&#39;    =&gt; &#39;default&#39;,</span>
<span class="x">    &#39;cache_pathsrc&#39;    =&gt; &#39;default&#39;,</span>
<span class="x">    &#39;cache_uc_price&#39;   =&gt; &#39;default&#39;,</span>
<span class="x">    //&#39;cache_update&#39;     =&gt; &#39;default&#39;,</span>
<span class="x">    &#39;cache_users&#39;      =&gt; &#39;default&#39;,</span>
<span class="x">    &#39;cache_views&#39;      =&gt; &#39;default&#39;,</span>
<span class="x">    //&#39;cache_views_data&#39; =&gt; &#39;default&#39;,    </span>
<span class="x">  );</span>
<span class="x">  </span>
<span class="x">  // Define Drupal cache settings:</span>
<span class="x">  // Inactivate database connection if the cache backend doesn&#39;t need it (for</span>
<span class="x">  // cache_page bin only). If the page is not cached the db connection will be</span>
<span class="x">  // made later.</span>
<span class="x">  $conf[&#39;page_cache_without_database&#39;] = TRUE;</span>
<span class="x">  // Avoid executing very early hooks in case of page cached (like hook_boot).</span>
<span class="x">  $conf[&#39;page_cache_invoke_hooks&#39;]     = TRUE;</span>
<span class="x">  // Cached page lifetime.</span>
<span class="x">  $conf[&#39;page_cache_maximum_age&#39;]      = 3600;</span>
<span class="x">  // Default lifetime for all cache entries (except form and page), if no</span>
<span class="x">  // lifetime is specified by the module.</span>
<span class="x">  $conf[&#39;cache_lifetime&#39;]              = 0;</span></code></pre></div>


<h3>And the sessions?</h3>

<p>We've just been removing write and read requests from MySQL.
But if you're tracking the request &amp; locks usage in MySQL you will see that the main problem  is not really the cache backends, it's the session managmenent.
Session Management in MySQL implies a very huge number of write operations in the session table.
This single table is used in a very special way, no other table in the database is used with such read/write/delete ratio.
So by definition it's quite hard to perform some fine tunning on the MySQL server if this table is not removed.
To be honest statistics tracking can also make a lot of write requests,  but this is yet another problem</p>

<p>The Cache Backend management is not responsible of the session storage (at least  by default).
Memcache module is providing a tool for that, Cache Router module  was announcing it as well.
But The use of a new Module called <a href="http://drupal.org/sandbox/pounard/1263216">Session Proxy</a> should be the definitive solution,
allowing usage of a cache backend or usage of PHP native sessions (which can be set to memcache, mongodb, redis, etc.).
Today it's still a sandboxed  module, no official release. available only with Drupal7.</p>

<p>More on this module when released (like how to manage session locks, how to configure the cache backend for sessions, etc).</p>

<p>We could also talk about the lock API in Drupal (lock.inc), with a default implementation using MySQL.
Some modules provides lock alternatives which are faster (like the Redis module)...</p>


          </div>
         </div>
        </div>
        <div class="tag">Tags:&nbsp;<i class="glyphicon glyphicon-tag"></i><a href="/tag/Cache/">Cache</a>, <i class="glyphicon glyphicon-tag"></i><a href="/tag/Drupal/">Drupal</a>, <i class="glyphicon glyphicon-tag"></i><a href="/tag/PHP/">PHP</a>, <i class="glyphicon glyphicon-tag"></i><a href="/tag/Performance/">Performance</a></div>
</article>
<hr/>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: * * */
    var disqus_shortname = "regilero";
    var disqus_identifier = '2fa0e759-986a-4b5f-a04e-4fa55530e7da';
    var disqus_title = "Separate cache Backends with Drupal6 and Drupal7.";
    var disqus_url = 'http://regilero.github.io/drupal/english/2011/10/03/separate_cache_backends_d6_and_d7/';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    

      </div>
      <div class="col-md-4" id="sideBar">

            <div id="sideBarContent"> 
              
              <div class="sideBarListBox">
                <div class="page-header">
                <h3>Related posts</h3>
                </div>
                <div class="list-group" role="navigation">
                  
                     <a class="list-group-item" href="/drupal/english/2011/10/18/drupal_mongodb_statistics_module_published/">
                     <h4>Drupal - Mongodb statistics module published</h4>
                     <p>mongodb-statistics module for drupal is a replacement for core statistics module using an ajax callback tracker.</p>
                     </a>
                  
                     <a class="list-group-item" href="/drupal/english/2011/09/01/better_rewrite_rules_for_drupal/">
                     <h4>Better rewriteRules for Drupal</h4>
                     <p>A big re-think of rewrite rules for Drupal, preventing acess from index.php?q=foo default url, no .htaccess, and some other security stuff</p>
                     </a>
                  
                     <a class="list-group-item" href="/drupal/english/2013/05/16/Warning_chrooted_php_fpm_and_apc/">
                     <h4>Warning Chrooted php-fpm and Apc with multiple pools</h4>
                     <p>Using several chrooted php-fpm pools with APCÂ opcode may break all your websites (and chroot jails). Step by step of cloning php-fpm daemons.</p>
                     </a>
                  
                     <a class="list-group-item" href="/apache/english/2009/11/06/more_on_static_file_redirector/">
                     <h4>More on Static file redirector</h4>
                     <p>Complements on the previous article. hash the file map, use a /static url, and avoid security problems with tis new mode.</p>
                     </a>
                  
                     <a class="list-group-item" href="/apache/english/2009/11/05/use_rewrite_map_to_prevent_proxying_for_some_static_contents/">
                     <h4>Use RewriteMap to prevent proxying for some static contents</h4>
                     <p>How to use the not well known RewriteMap Apache feature to proxy static resources on a web app without clean url separation between static and dynamic content (here Plone).</p>
                     </a>
                  
                </div>
              </div>
              
      
              <div class="sideBarListBox">
                <div class="page-header">
                <h3>Latest posts</h3>
                </div>
                <div class="list-group" role="navigation">
                  
                     <a class="list-group-item" href="/postgresql/english/2017/06/26/postgresql_advanced_generate_series/">
                     PostgreSQL, advanced use of generate_series for data generation
                     </a>
                  
                     <a class="list-group-item" href="/security/english/2016/12/19/security_dompdf_rce/">
                     Web Security, Dompdf security issues details
                     </a>
                  
                     <a class="list-group-item" href="/security/english/2016/06/10/security_play_with_implicit_html_and_closing_divs/">
                     Web Security, using bad HTML to escape from a DIV
                     </a>
                  
                     <a class="list-group-item" href="/security/english/2015/10/04/http_smuggling_in_2015_part_one/">
                     Checking HTTP Smuggling issues in 2015 - Part1
                     </a>
                  
                     <a class="list-group-item" href="/security/english/2015/03/25/nginx-integer_truncation/">
                     Nginx Integer Truncation
                     </a>
                  
                </div>
              </div>
            
              <div class="sideBarListBox">
                <div class="page-header">
                <h3>Tags</h3>
                </div>

                <div class="tagcloud">
                <a style='font-size: 18px' class='taglink' href='/tag/Web/'>Web</a>
<a style='font-size: 12px' class='taglink' href='/tag/HTML5/'>HTML5</a>
<a style='font-size: 32px' class='taglink' href='/tag/PHP/'>PHP</a>
<a style='font-size: 18px' class='taglink' href='/tag/APC/'>APC</a>
<a style='font-size: 22px' class='taglink' href='/tag/Proxy/'>Proxy</a>
<a style='font-size: 22px' class='taglink' href='/tag/PostgreSQL/'>PostgreSQL</a>
<a style='font-size: 12px' class='taglink' href='/tag/Smuggling/'>Smuggling</a>
<a style='font-size: 24px' class='taglink' href='/tag/SaltStack/'>SaltStack</a>
<a style='font-size: 12px' class='taglink' href='/tag/Js/'>Js</a>
<a style='font-size: 12px' class='taglink' href='/tag/Statistics/'>Statistics</a>
<a style='font-size: 31px' class='taglink' href='/tag/Security/'>Security</a>
<a style='font-size: 18px' class='taglink' href='/tag/Injection/'>Injection</a>
<a style='font-size: 12px' class='taglink' href='/tag/Cache/'>Cache</a>
<a style='font-size: 18px' class='taglink' href='/tag/jinja/'>jinja</a>
<a style='font-size: 12px' class='taglink' href='/tag/Bash/'>Bash</a>
<a style='font-size: 12px' class='taglink' href='/tag/Managed/'>Managed</a>
<a style='font-size: 18px' class='taglink' href='/tag/BlockReplace/'>BlockReplace</a>
<a style='font-size: 12px' class='taglink' href='/tag/Ajax/'>Ajax</a>
<a style='font-size: 12px' class='taglink' href='/tag/CVE/'>CVE</a>
<a style='font-size: 22px' class='taglink' href='/tag/Nginx/'>Nginx</a>
<a style='font-size: 22px' class='taglink' href='/tag/mod_rewrite/'>mod_rewrite</a>
<a style='font-size: 12px' class='taglink' href='/tag/Accumulated/'>Accumulated</a>
<a style='font-size: 28px' class='taglink' href='/tag/Performance/'>Performance</a>
<a style='font-size: 32px' class='taglink' href='/tag/Apache/'>Apache</a>
<a style='font-size: 18px' class='taglink' href='/tag/RewriteMap/'>RewriteMap</a>
<a style='font-size: 12px' class='taglink' href='/tag/ZendFramework/'>ZendFramework</a>
<a style='font-size: 12px' class='taglink' href='/tag/Bug/'>Bug</a>
<a style='font-size: 12px' class='taglink' href='/tag/Linux/'>Linux</a>
<a style='font-size: 12px' class='taglink' href='/tag/js/'>js</a>
<a style='font-size: 12px' class='taglink' href='/tag/Monitoring/'>Monitoring</a>
<a style='font-size: 26px' class='taglink' href='/tag/HTTP/'>HTTP</a>
<a style='font-size: 31px' class='taglink' href='/tag/Drupal/'>Drupal</a>
<a style='font-size: 12px' class='taglink' href='/tag/HTML/'>HTML</a>
<a style='font-size: 18px' class='taglink' href='/tag/PHP-fpm/'>PHP-fpm</a>
<a style='font-size: 12px' class='taglink' href='/tag/Mongodb/'>Mongodb</a>
<a style='font-size: 12px' class='taglink' href='/tag/Varnish/'>Varnish</a>
<a style='font-size: 12px' class='taglink' href='/tag/Dojo/'>Dojo</a>
<a style='font-size: 18px' class='taglink' href='/tag/Plone/'>Plone</a>
<a style='font-size: 12px' class='taglink' href='/tag/HAProxy/'>HAProxy</a>

                </div>
              </div>
          </div> <!-- end sideBarContent -->
            
            <div class="sideBarMore">
              <div class="page-header">
              <h3>About</h3>
              </div>
                <a href="https://twitter.com/regilero" target="_blank"><img src="/theme/img/twitter_thumb.png" width="48" height="48" alt="Twitter regilero" title="Twitter regilero"></a>
                <a href="https://github.com/regilero" target="_blank"><img src="/theme/img/github_thumb.png" width="48" height="48" alt="Github regilero" title="Github regilero"></a>
                <a href="https://plus.google.com/111280074129555323484?rel=author" target="_blank"><img src="/theme/img/google-plus-thumb.png" width="48" height="48" alt="G+" title="G+"></a>
                <a href="http://www.flickr.com/photos/regilero/" target="_blank"><img src="/theme/img/flickr_thumb.png" width="48" height="48" alt="Flickr photos" title="Flickr photos"></a>
                <a href="http://stackoverflow.com/users/550618/regilero" target="_blank"><img src="http://stackoverflow.com/users/flair/550618.png" width="208" height="58" alt="profile for regilero at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for regilero at Stack Overflow, Q&amp;A for professional and enthusiast programmers"></a>
                <a href="http://stackexchange.com/users/264377/regilero"  target="_blank"><img src="http://stackexchange.com/users/flair/264377.png?theme=clean" width="208" height="58" alt="profile for regilero on Stack Exchange, a network of free, community-driven Q&amp;A sites" title="profile for regilero on Stack Exchange, a network of free, community-driven Q&amp;A sites" /></a>
            </div>
            <div class="sideBarItem">
              <h3>Some Friends</h3>
                <ul>
                  <li><a class="effect" target="_blank" href="http://makina-corpus.com/blog/metier/actu-metier">Blogs Makina Corpus<div class="cover-right"><img src="/theme/img/makinaorg.png" height="30" width="30"><img src="/theme/img/makinaorg_banner.png" height="30" width="117"></div></a></li>
                  <li><a class="effect" target="_blank" href="http://www.makina-corpus.com">Makina Corpus<div class="cover-right"><img src="/theme/img/makinacom.png" height="30" width="30"><img src="/theme/img/makinacom_banner.png" height="30" width="117"></div></a></li>
                  <li><a class="effect" target="_blank" href="http://blog.processus.org/">Pounard, processus.org<div class="cover-right"><img src="/theme/img/pounard.png" height="30" width="30"><img src="/theme/img/pounard_banner.png" height="30" width="117"></div></a></li>
                  <li><a class="effect" target="_blank" href="http://toutpt.github.io/" >Toupt<div class="cover-right"><img src="/theme/img/toupt.png" height="30" width="30"><img src="/theme/img/toupt_banner.png" height="30" width="117"></div></a></li>
                  <li><a class="effect" target="_blank" href="http://francoisgaudin.com/">FranÃ§ois Gaudin<div class="cover-right"><img src="/theme/img/gaudin.png" height="30" width="30"><img src="/theme/img/gaudin_banner.png" height="30" width="117"></div></a></li>
                  <li><a class="effect" target="_blank" href="http://fle.github.io/">Florent Lebreton<div class="cover-right"><img src="/theme/img/fle.png" height="30" width="30"><img src="/theme/img/fle_banner.png" height="30" width="117"></div></a></li>
                </ul>
                <div class="clear"></div>
            </div>
         </div> <!-- end sidebar -->
        
       </div><!-- end row -->
       <div class="row">
         <div class="col-md-12" id="footer">
           <div class="panel panel-default">
             <div class=panel-footer">
          <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/fr/"><img alt="Licence Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/fr/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">regilero's blog</span> est mis Ã  disposition selon les termes de la <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/fr/">licence Creative Commons Attribution -  Partage dans les MÃªmes Conditions 3.0 France</a>.<br />FondÃ©(e) sur une Åuvre Ã  <a xmlns:dct="http://purl.org/dc/terms/" href="http://regilero.github.io" rel="dct:source">http://regilero.github.io</a>.
              </div>
            </div>
         </div>
       </div><!-- end row -->
  </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<!--    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script> -->
    <script src="/theme/js/toc.min.js" ></script>
    <script src="/theme/js/effects.js" ></script>
   <script src="/theme/js/jquery.parallax.min.js"></script>
    <script src="/theme/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-40859893-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
    </body>
</html>
