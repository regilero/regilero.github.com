<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> PostgreSQL, advanced use of generate_series for data generation |  RBleug</title>
    <meta name="description" content="Regilero's blog; Mostly tech things about web stuff."/>
    <meta name="author" content="regilero"/>
    <link rel="author" href="/contact/" title="who am I?" type="text/html" />
    <link rel="icon" type="image/x-icon" href="/theme/img/regilero.ico" />
    <link rel="shortcut icon" type="image/x-icon" href="/theme/img/regilero.ico" />
    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed.xml" />
    <link rel="stylesheet" href="/theme/bootstrap/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/theme/bootstrap/css/bootstrap-theme.min.css" type="text/css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
<!--
    <link rel="stylesheet" href="/theme/blueprint/screen.css" type="text/css" media="screen, projection">
    <link rel="stylesheet" href="/theme/blueprint/print.css" type="text/css" media="print">
    <link rel="stylesheet" href="/theme/syntax.css" type="text/css" />
    <!--[if lt IE 8]>
      <link rel="stylesheet" href="/theme/blueprint/ie.css" type="text/css" media="screen, projection">
    <![endif]-->
<!--
    <link rel="stylesheet" href="/theme/blueprint/plugins/link-icons/screen.css" type="text/css" media="screen, projection">
    <link rel="stylesheet" href="/theme/fontello/css/fontello.css">
    <!--[if IE 7]><link rel="stylesheet" href="/theme/fontello/css/fontello-ie7.css"><![endif]-->
    <link href="/theme/syntax.css" rel="stylesheet" type="text/css" />
    <link href="/theme/style.css" rel="stylesheet" type="text/css" />

  </head>
  <body>
    <div class="topNav navbar navbar-inverse navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand visible-xs-inline" href="#">Navigation</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li ><a href="/" class="glyphicon glyphicon-home">&nbsp;Home</a></li>
            <li ><a href="/archives/" class="glyphicon glyphicon-th">&nbsp;Archives</a></li>
            <li ><a href="/contact/" class="glyphicon glyphicon-earphone">&nbsp;Contact</a></li>
            <li><a class="glyphicon glyphicon-eye-open" href="/feed.xml">&nbsp;RSS Feed</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

  <div class="container" role="main">
  
    <div class="jumbotron">
      <div class="container">
         <div id="branding">
           <h1 class="logo"><a href="/">RBleug</a></h1>
           <hr/>
           <h2 class="alt">Regilero's blog; Mostly tech things about web stuff.</h2>
         </div>
       </div>
     </div>

    <div class="row">
      <div class="col-md-8" id="left-content">

          <article>
        <header>
            <div class="page-header">
            <h1>PostgreSQL, advanced use of generate_series for data generation
            <br/><span><i class="glyphicon glyphicon-time">&nbsp;</i><time datetime="2017-06-26">Jun 26, 2017</time></span>
            <span class="category"><i class="glyphicon glyphicon-list">&nbsp;</i> <a href="/PostgreSQL/">PostgreSQL</a> and <a href="/english/">english</a></span>
            </h1>
            </div>
        </header>

        <div class="entry">
         <div class="col-md-6">
          <div class="post-excerpt-full">
          filling thousands of random realistic data rows.
          </div>
          <div id="post-toc">
          </div>
         </div>
         <div class="col-md-6">
          <img class="topimg" src="/theme/img/pic/generation.jpg" alt="filling thousands of random realistic data rows." title="filling thousands of random realistic data rows." />
         </div>
         <div class="row">
          <div class="col-md-12" id="post-full">
       
          <p><small><strong>English version</strong> (<strong>Version Française</strong> disponible sur <a href="http://www.makina-corpus.com/blog/metier/2017/postgresql-utilisations-avancees-de-generate_series-pour-generer-du-contenu">makina corpus</a>).</small>
<small>estimated read time: 10-15min</small></p>

<p><em>Generating massive amounts of data can be useful to test queries, indexes and
complex treatments on more realistics volumes, to get useful approximations of
production response times.</em></p>

<p><em>In this article we'll study some <code>generate_series()</code> usages allowing us to feed all types of tables.</em></p>

<p>The starting point is that we have two tables to feed (<code>contact</code> and <code>company</code>), with some constraints on these tables:</p>

<ul>
<li>a <strong>foreign key</strong> contraint, linking a <code>contact</code> to one <code>company</code></li>
<li>some constraints on column <strong>sizes</strong> (like for last name and first name)</li>
<li>some specific constraints (CHECK) on <strong>dates</strong> (like a <code>contact</code> has some first and last interactions dates,
and these dates have some constraints between each other, and cannot be in the future, etc.)</li>
</ul>


<p>The other point is that we need to work on several tens of thousands of rows.
For example to apply a functionnal process that need to be applied in production later and control the speed
of this process. Or simply to test that our indexation plan is right.</p>

<p>Some tools exists, able to generate content. In the Django world, for example,
you could use <a href="https://factoryboy.readthedocs.io/en/latest/">Factory Boy</a>, or <a href="https://djangopackages.org/grids/g/fixtures/">others</a>. But here we'll show how to generate this same type of data in a quite <em>simple</em> manne,
<strong>using SQL</strong> directly, in a very very fast way (fast enough to be added in a
functionnal test setUp).</p>

<p>We first need a realistic model. With a <code>company</code> table, a <code>contact</code> table, some
index, and two or three lines of examples.</p>

<p>You can download <a href="https://github.com/regilero/regilero.github.com/blob/master/theme/resource/pgserie/basic_schema.sql">an example basic_schema.sql script</a> containing all these elements (<a href="http://regilero.github.io/theme/resource/pgserie/basic_schema.sql">direct download</a>.</p>

<p>And we can also use <strong>SQLFiddle</strong> to <a href="http://sqlfiddle.com/#!17/25d75/1">visualize this structure online</a>. But my
advice is to create a test database and to run this SQL inside, it will be easier
to test the complex queries in your own database.</p>

<h2>Simple data generation</h2>

<p>Let's use <code>generate_series</code> to generate some data :</p>

<p><figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="c1">-- tall numbers between 1 and 100 (step 1 by default)</span>
<span class="k">SELECT</span> <span class="n">generate_series</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">);</span>
<span class="c1">-- all dates between 2010/05/10 and now,</span>
<span class="c1">-- with a step of 78 days, 15 hours and 10 minutes</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">generate_series</span><span class="p">(</span><span class="s1">&#39;2010-10-05 00:00&#39;</span><span class="p">::</span><span class="k">timestamp</span><span class="p">,</span>
                              <span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
                              <span class="s1">&#39;8 days 15 hours 12min&#39;</span><span class="p">);</span></code></pre></figure></p>

<p>As we can see this function is quite powerful (<a href="http://sqlfiddle.com/#!17/9eecb/191">SQLFidlle1</a> <a href="http://sqlfiddle.com/#!17/9eecb/190">SQLFidlle2</a>).</p>

<p>But our goal is to push this usage <strong>further</strong>.</p>

<h2>Generating names from syllables</h2>

<p>Let's start with <a href="https://github.com/regilero/regilero.github.com/blob/master/theme/resource/pgserie/feeding_company.sql">this query</a> which generates a lot of company names, we'll use that to feed the <code>company</code> table:</p>

<p><figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span><span class="p">(</span>
    <span class="k">SELECT</span> <span class="n">concat_ws</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="n">name_first</span><span class="p">,</span> <span class="n">name_last</span><span class="p">)</span> <span class="k">as</span> <span class="k">generated</span>
    <span class="k">FROM</span> <span class="p">(</span>
        <span class="k">SELECT</span> <span class="n">string_agg</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">FROM</span> <span class="p">(</span>
            <span class="k">select</span> <span class="n">start_arr</span><span class="p">[</span> <span class="mi">1</span> <span class="o">+</span> <span class="p">(</span> <span class="p">(</span><span class="n">random</span><span class="p">()</span> <span class="o"><em></span> <span class="mi">25</span><span class="p">)::</span><span class="nb">int</span><span class="p">)</span> <span class="o">%</span> <span class="mi">16</span> <span class="p">]</span>
            <span class="k">FROM</span>
            <span class="p">(</span>
                <span class="k">select</span> <span class="s1">&#39;{CO,GE,FOR,SO,CO,GIM,SE,CO,GE,CA,FRA,GEC,GE,GA,FRO,GIP}&#39;</span><span class="p">::</span><span class="nb">text</span><span class="p">[]</span> <span class="k">as</span> <span class="n">start_arr</span>
            <span class="p">)</span> <span class="n">syllarr</span><span class="p">,</span>
            <span class="c1">-- need 3 syllabes, and force generator interpretation with the &#39;</em>0&#39; (else 3 same syllabes)</span>
            <span class="n">generate_series</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span> <span class="o">+</span> <span class="p">(</span><span class="n">generator</span><span class="o"><em></span><span class="mi">0</span><span class="p">))</span>
        <span class="p">)</span> <span class="k">AS</span> <span class="n">comp3syl</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="p">)</span> <span class="k">AS</span> <span class="n">comp_name_1st</span><span class="p">(</span><span class="n">name_first</span><span class="p">),</span>
    <span class="p">(</span>
        <span class="k">SELECT</span> <span class="n">x</span><span class="p">[</span> <span class="mi">1</span> <span class="o">+</span> <span class="p">(</span> <span class="p">(</span><span class="n">random</span><span class="p">()</span> <span class="o"></em></span> <span class="mi">25</span><span class="p">)::</span><span class="nb">int</span><span class="p">)</span> <span class="o">%</span> <span class="mi">14</span> <span class="p">]</span>
        <span class="k">FROM</span> <span class="p">(</span>
            <span class="k">select</span> <span class="s1">&#39;{Ltd,&amp; Co,SARL,SA,Gmbh,United,Brothers,&amp; Sons,International,Ext,Worldwide,Global,2000,3000}&#39;</span><span class="p">::</span><span class="nb">text</span><span class="p">[]</span>
        <span class="p">)</span> <span class="k">AS</span> <span class="n">z2</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="p">)</span> <span class="k">AS</span> <span class="n">comp_name_last</span><span class="p">(</span><span class="n">name_last</span><span class="p">)</span>
    <span class="p">)</span>
<span class="k">FROM</span> <span class="n">generate_series</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">)</span> <span class="k">as</span> <span class="n">generator</span></code></pre></figure></p>

<p>As we <a href="http://sqlfiddle.com/#!17/9eecb/186">can see on SQL Fiddle</a> this somewhat strange query works and generates 10,000 company names, from 3 syllables and a final word (like "SOCOGEC 2000" or "COGEFOR Worldwide"). <strong>The query does not use any table, there's not even a model for this in SQL Fiddle.</strong></p>

<p>In this query we can find some calls to <code>RANDOM()</code> allowing choices variations on syllables, the  <code>% 14</code> and <code>% 16</code> are importants, they use the array effective size to choose randomly one the record in the array.
The <strong>most complex part</strong> of the request is the <code>+ (generator*0)</code>, reusing the identifier generated in <code>generate_series</code>,
multiplied by 0 (so doing nothing with it). Without this call the subquery would be optimized
and not a correlated one, and only on syllables combination would be generated. We would have 10,000 rows, with 10,000 identifiers, but the same company name for each line.</p>

<p>Once we have a good <code>SELECT</code> we just have to <code>INSERT</code> the result in the table, using an insert query of this form:</p>

<p><figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">matable</span><span class="p">(</span><span class="n">field1</span><span class="p">,</span> <span class="n">field2</span><span class="p">)</span>
    <span class="k">SELECT</span> <span class="p">.....</span> <span class="c1">-- (here the select we just found) ....</span>
<span class="k">ON</span> <span class="n">CONFLICT</span> <span class="k">DO</span> <span class="k">NOTHING</span><span class="p">;</span></code></pre></figure></p>

<p>The <code>ON CONFLICT</code> part is ot available before PostgreSQL 9.5, it can be used to
ignore the unique key errors. On an older PostgreSQL you'll have to generate
a select without key errors (using disticnt for example), here with this
<code>DO NOTHING</code> I won't have any duplicate problem, they'll get rejected silently.</p>

<p>On our starting schema we add <a href="http://sqlfiddle.com/#!17/ec332/1">in SQL Fiddle the generation of some companies</a>
and we can see that we effectively loose one third of the companies as they were duplicates and were not inserted in the database.</p>

<h2>More complex, again</h2>

<p>We have companies.</p>

<p>Now we'll try to get a <code>SELECT</code> query with all the necessary columns for a contact insertion.</p>

<p>Using the same template as the company names we can quite easily generate last and first names. <a href="https://github.com/regilero/regilero.github.com/blob/master/theme/resource/pgserie/generating_names1.sql">HERE, for example, I generate names</a><a href="http://sqlfiddle.com/#!17/9eecb/188">SQLFiddle</a>. Note that if I remove the <code>+ (generator*0)</code>, <a href="http://sqlfiddle.com/#!17/9eecb/189">we generate the same name for each line</a>.</p>

<p>We can generate some fake company identifiers (a random int between 1 and 6300 for example)
and find back this company to use the comapny name on the email address.
Email that need to be complete the last and first name (without accents).</p>

<p>I can choose randomly a status on the contact status <code>ENUM</code> choices.</p>

<p>But we'll also need dates, Creation datetime, update datetime, and some interaction dates with these contacts.</p>

<p>For this task I will start by building a pseudo table with dates. I want to be able, for on contact, to choose one date in this tables and use it as a creation date. I will then have some other dates columns in this same table, where the dates are after the first one (some weeks after for a first date, and some more time for a second one).</p>

<p>By choosing randomly in this pseudo table I will be able to generate some profiles of contact creation dates and actions dates made on the contact.</p>

<p>I will use <code>UNION</code> queries in the dates collection to get different spannings, I want
a big number of dates on the last year, some others on the last 5 yers, and less on the last 10 years.
And of course i need these dates in a random order, but with an increment that I can use to match these dates as if it were an identifier.</p>

<p>THe source code of this sub group of 1083 lines each giving 3 dates <a href="https://github.com/regilero/regilero.github.com/blob/master/theme/resource/pgserie/generate_date_set.sql">is here</a> and we can <a href="http://sqlfiddle.com/#!17/9eecb/193">see it in action with SQLFidlle</a></p>

<pre><code> rownum |           base_date           |       date_up_to_7_days       |      date_up_to_3_months
--------+-------------------------------+-------------------------------+-------------------------------
      1 | 2016-12-12 11:49:32.811583+01 | 2016-12-15 22:20:32.811583+01 | 2017-06-27 18:34:32.811583+02
      2 | 2017-02-24 06:21:32.811583+01 | 2017-03-01 07:36:32.811583+01 | 2017-06-27 18:34:32.811583+02
      3 | 2012-06-28 08:40:32.811583+02 | 2012-07-02 15:06:32.811583+02 | 2014-02-22 07:16:32.811583+01
      4 | 2007-12-05 17:55:32.811583+01 | 2007-12-10 17:35:32.811583+01 | 2008-07-19 06:27:32.811583+02
      5 | 2014-01-09 18:48:32.811583+01 | 2014-01-10 22:10:32.811583+01 | 2014-10-25 19:48:32.811583+02
      6 | 2007-08-23 01:56:32.811583+02 | 2007-08-28 17:25:32.811583+02 | 2007-12-20 02:12:32.811583+01
      7 | 2017-01-01 00:54:32.811583+01 | 2017-01-05 06:28:32.811583+01 | 2017-06-27 18:34:32.811583+02
      8 | 2014-05-16 11:14:32.811583+02 | 2014-05-16 21:10:32.811583+02 | 2016-03-24 09:57:32.811583+01
</code></pre>

<p>This sort of data group can be used in my request like a table by using the keyword <code>WITH</code>:</p>

<p><figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">WITH</span> <span class="n">dates1083</span> <span class="k">AS</span> <span class="p">(</span>
    <span class="p">...</span> <span class="c1">-- here the big dates select ...</span>
<span class="p">)</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span>
    <span class="n">tbl1</span>
    <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">dates1083</span> <span class="k">ON</span> <span class="n">tbl1</span><span class="p">.</span><span class="n">foo_id</span> <span class="o">=</span> <span class="n">dates1083</span><span class="p">.</span><span class="n">id</span></code></pre></figure></p>

<p>This avoids creating a temporary table, this table will only be used in the current query.</p>

<p>This query, with all the dynamic columns, all reusing a base <code>generate_serie</code>, will be quite big.</p>

<p>In a simplified version, where the big generators are replaced by [ ... comments blocs .. ] we'll get :</p>

<p><figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">WITH</span> <span class="n">dates1083</span> <span class="k">as</span> <span class="p">(</span>
    <span class="p">[</span> <span class="p">..</span> <span class="n">Here</span> <span class="n">the</span> <span class="n">whole</span> <span class="mi">1083</span> <span class="o">*</span><span class="mi">3</span>  <span class="n">columns</span> <span class="n">pseudo</span> <span class="k">table</span> <span class="n">generation</span> <span class="p">...</span> <span class="p">]</span>
<span class="p">)</span></p>

<p><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">contact</span><span class="p">(</span>
    <span class="n">con_id</span><span class="p">,</span>
    <span class="n">con_active</span><span class="p">,</span>
    <span class="n">con_firstname</span><span class="p">,</span>
    <span class="n">con_lastname</span><span class="p">,</span>
    <span class="n">con_mail</span><span class="p">,</span>
    <span class="n">date_create</span><span class="p">,</span>
    <span class="n">con_date_first_interaction</span><span class="p">,</span>
    <span class="n">con_date_last_interaction</span><span class="p">,</span>
    <span class="n">date_alter</span><span class="p">,</span>
    <span class="n">con_status</span><span class="p">,</span>
    <span class="n">comp_id</span>
<span class="p">)</span>
<span class="k">SELECT</span>
    <span class="n">id</span><span class="p">,</span>
    <span class="n">con_active</span><span class="p">,</span>
    <span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">show_first_name</span> <span class="k">THEN</span> <span class="n">name_first</span> <span class="k">ELSE</span> <span class="k">NULL</span> <span class="k">END</span> <span class="k">as</span> <span class="n">con_first_name</span><span class="p">,</span>
    <span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">show_last_name</span> <span class="k">THEN</span> <span class="n">name_last</span> <span class="k">ELSE</span> <span class="k">NULL</span> <span class="k">END</span> <span class="k">as</span> <span class="n">con_last_name</span><span class="p">,</span>
    <span class="c1">-- con_mail</span>
    <span class="n">concat_ws</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">,</span><span class="n">co</span> <span class="p">[</span> <span class="p">...</span> <span class="n">Here</span> <span class="n">string</span> <span class="n">manipulations</span><span class="p">,</span> <span class="k">with</span> <span class="k">column</span> <span class="k">from</span> <span class="n">company</span><span class="p">,</span> <span class="n">name</span> <span class="k">and</span> <span class="k">first</span> <span class="n">name</span> <span class="p">...</span> <span class="p">]</span> <span class="p">)</span> <span class="k">as</span> <span class="n">mail</span><span class="p">,</span>
    <span class="c1">-- date_create</span>
    <span class="n">dates1083</span><span class="p">.</span><span class="n">base_date</span> <span class="k">as</span> <span class="n">date_create</span><span class="p">,</span>
    <span class="c1">-- con_date_first_interaction</span>
    <span class="k">CASE</span> <span class="k">WHEN</span> <span class="p">(</span><span class="n">has_1st_interact</span><span class="o">=</span><span class="k">true</span><span class="p">)</span> <span class="k">THEN</span> <span class="n">dates1083</span><span class="p">.</span><span class="n">date_up_to_7_days</span> <span class="k">ELSE</span> <span class="k">NULL</span> <span class="k">END</span> <span class="k">as</span> <span class="n">date_1st_interact</span><span class="p">,</span>
    <span class="c1">-- con_date_last_interaction</span>
    <span class="k">CASE</span> <span class="k">WHEN</span> <span class="p">(</span><span class="n">has_2nd_interact</span><span class="o">=</span><span class="k">true</span> <span class="k">AND</span> <span class="n">has_1st_interact</span><span class="o">=</span><span class="k">true</span><span class="p">)</span> <span class="k">THEN</span> <span class="n">dates1083</span><span class="p">.</span><span class="n">date_up_to_3_months</span>
        <span class="k">WHEN</span> <span class="p">(</span><span class="n">has_2nd_interact</span><span class="o">=</span><span class="k">false</span> <span class="k">AND</span> <span class="n">has_1st_interact</span><span class="o">=</span><span class="k">true</span><span class="p">)</span> <span class="k">THEN</span> <span class="n">dates1083</span><span class="p">.</span><span class="n">date_up_to_7_days</span>
        <span class="k">ELSE</span> <span class="k">NULL</span> <span class="k">END</span> <span class="k">as</span> <span class="n">date_2nd_interact</span><span class="p">,</span>
    <span class="c1">-- date_alter</span>
    <span class="k">CASE</span> <span class="k">WHEN</span> <span class="p">(</span><span class="n">has_2nd_interact</span><span class="o">=</span><span class="k">true</span> <span class="k">AND</span> <span class="n">has_1st_interact</span><span class="o">=</span><span class="k">true</span><span class="p">)</span> <span class="k">THEN</span> <span class="n">dates1083</span><span class="p">.</span><span class="n">date_up_to_3_months</span>
        <span class="k">WHEN</span> <span class="p">(</span><span class="n">has_1st_interact</span><span class="o">=</span><span class="k">true</span><span class="p">)</span> <span class="k">THEN</span> <span class="n">dates1083</span><span class="p">.</span><span class="n">date_up_to_7_days</span> <span class="k">ELSE</span> <span class="n">dates1083</span><span class="p">.</span><span class="n">base_date</span> <span class="k">END</span> <span class="k">as</span> <span class="n">date_alter</span><span class="p">,</span>
    <span class="c1">-- con_status</span>
    <span class="n">con_status</span><span class="p">,</span>
    <span class="c1">-- company link</span>
    <span class="n">main_sub</span><span class="p">.</span><span class="n">comp_id</span>
<span class="k">FROM</span> <span class="p">(</span>
    <span class="c1">-- name_first</span>
    <span class="k">SELECT</span><span class="p">(</span>
        <span class="p">[</span> <span class="p">..</span> <span class="n">Here</span> <span class="k">first</span> <span class="n">name</span> <span class="n">generator</span> <span class="p">...</span> <span class="p">]</span>
    <span class="p">),</span>
    <span class="c1">-- name_last</span>
    <span class="p">(</span>
        <span class="p">[</span> <span class="p">..</span> <span class="n">Here</span> <span class="k">last</span> <span class="n">name</span> <span class="n">generator</span> <span class="p">...</span> <span class="p">]</span>
    <span class="p">),</span>
    <span class="c1">-- con_status</span>
    <span class="p">(</span>
        <span class="p">[</span> <span class="p">..</span> <span class="n">Here</span> <span class="n">status</span> <span class="n">enum</span> <span class="n">choice</span>  <span class="n">generator</span> <span class="p">...</span> <span class="p">]</span>
    <span class="p">),</span>
    <span class="c1">-- comp_id (used for joining company table, adding comp_name on email</span>
    <span class="p">(</span>
        <span class="k">select</span>  <span class="p">(</span><span class="n">random</span><span class="p">()</span> <span class="o"><em></span> <span class="mi">10000</span><span class="p">)::</span><span class="nb">int</span> <span class="o">+</span> <span class="p">(</span><span class="n">generator</span><span class="o"></em></span><span class="mi">0</span><span class="p">)</span> <span class="k">as</span> <span class="n">comp_id</span>
    <span class="p">),</span>
    <span class="c1">-- base_date_num (used for joining dates1083 pseudo-table, and computing others dates from that</span>
    <span class="p">(</span>
        <span class="k">select</span>  <span class="p">(</span><span class="n">random</span><span class="p">()</span> <span class="o"><em></span> <span class="mi">1083</span><span class="p">)::</span><span class="nb">int</span> <span class="o">+</span> <span class="p">(</span><span class="n">generator</span><span class="o"></em></span><span class="mi">0</span><span class="p">)</span> <span class="k">as</span> <span class="n">base_date_num</span>
    <span class="p">),</span>
    <span class="c1">-- con_active, something like 10% of false (inactive)</span>
    <span class="p">(</span>
        <span class="k">select</span> <span class="p">((</span><span class="n">random</span><span class="p">()</span> <span class="o"><em></span> <span class="mi">10</span> <span class="o">+</span> <span class="p">(</span><span class="n">generator</span><span class="o"></em></span><span class="mi">0</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)::</span><span class="nb">boolean</span> <span class="k">as</span> <span class="n">con_active</span>
    <span class="p">),</span>
    <span class="c1">-- has_1st interaction something like 95%</span>
    <span class="p">(</span>
        <span class="k">select</span> <span class="p">((</span><span class="n">random</span><span class="p">()</span> <span class="o"><em></span> <span class="mi">100</span> <span class="o">+</span> <span class="p">(</span><span class="n">generator</span><span class="o"></em></span><span class="mi">0</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)::</span><span class="nb">boolean</span> <span class="k">as</span> <span class="n">has_1st_interact</span>
    <span class="p">),</span>
    <span class="c1">-- has_2nd interaction something like 65%</span>
    <span class="p">(</span>
        <span class="k">select</span> <span class="p">((</span><span class="n">random</span><span class="p">()</span> <span class="o"><em></span> <span class="mi">100</span> <span class="o">+</span> <span class="p">(</span><span class="n">generator</span><span class="o"></em></span><span class="mi">0</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">35</span><span class="p">)::</span><span class="nb">boolean</span> <span class="k">as</span> <span class="n">has_2nd_interact</span>
    <span class="p">),</span>
    <span class="c1">-- let&#39;s hide some non required fields sometimes</span>
    <span class="c1">-- hiding 5 % of last_names</span>
    <span class="p">(</span>
        <span class="k">select</span> <span class="p">((</span><span class="n">random</span><span class="p">()</span> <span class="o"><em></span> <span class="mi">100</span> <span class="o">+</span> <span class="p">(</span><span class="n">generator</span><span class="o"></em></span><span class="mi">0</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)::</span><span class="nb">boolean</span> <span class="k">as</span> <span class="n">show_last_name</span>
    <span class="p">),</span>
    <span class="c1">-- hiding 5 % of first_names</span>
    <span class="p">(</span>
        <span class="k">select</span> <span class="p">((</span><span class="n">random</span><span class="p">()</span> <span class="o"><em></span> <span class="mi">100</span> <span class="o">+</span> <span class="p">(</span><span class="n">generator</span><span class="o"></em></span><span class="mi">0</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)::</span><span class="nb">boolean</span> <span class="k">as</span> <span class="n">show_first_name</span>
    <span class="p">),</span>
    <span class="c1">-- id</span>
    <span class="n">generator</span> <span class="k">as</span> <span class="n">id</span>
    <span class="k">FROM</span> <span class="n">generate_series</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span> <span class="k">as</span> <span class="n">generator</span>
    <span class="p">)</span> <span class="n">main_sub</span>
    <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">company</span> <span class="k">ON</span> <span class="n">company</span><span class="p">.</span><span class="n">comp_id</span> <span class="o">=</span> <span class="n">main_sub</span><span class="p">.</span><span class="n">comp_id</span>
    <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">dates1083</span> <span class="k">ON</span> <span class="n">dates1083</span><span class="p">.</span><span class="n">rownum</span> <span class="o">=</span> <span class="n">main_sub</span><span class="p">.</span><span class="n">base_date_num</span>
<span class="c1">-- ignore conflicts of ids, but not any checks constraint failure (on dates for example)</span>
<span class="k">ON</span> <span class="n">CONFLICT</span> <span class="k">DO</span> <span class="k">NOTHING</span><span class="p">;</span></code></pre></figure></p>

<p>Here is <a href="https://github.com/regilero/regilero.github.com/blob/master/theme/resource/pgserie/generating_contacts.sql">the full and commented version, without the INSERT part</a>.
There's a lot of elements inside, my advice is to copy that in a pgadmin SQL session and to play with the various columns.
You have siome booleans generated on subqueries, allowing choices adjustemnts with <code>CASE</code> on the top queries,
to get more various profils, to insert some <code>NULL</code> sometimes on some non required columns, etc.</p>

<p>We can of course <a href="http://sqlfiddle.com/#!17/ec332/2">see it in SQL Fiddle</a> where
the model is already present, as we need the company table to get the right email column.</p>

<pre><code> id  | con_active | con_first_name |   con_last_name    |                        mail                        |          date_create          |       date_1st_interact       |       date_2nd_interact       |          date_alter           | con_status | comp_id
-----+------------+----------------+--------------------+----------------------------------------------------+-------------------------------+-------------------------------+-------------------------------+-------------------------------+------------+---------
   1 | t          | Coaïco         | Takalaerjac        | coaico.takalaerjac@cocaco-global.com               | 2017-06-16 10:41:28.631596+02 | 2017-06-21 04:01:28.631596+02 | 2017-06-27 18:39:28.631596+02 | 2017-06-27 18:39:28.631596+02 | commercial |    4091
   2 | t          | Nnn            | Otoerkingchen      | nnn.otoerkingchen@sefrafor-international.com       | 2016-03-12 04:25:28.631596+01 | 2016-03-15 07:34:28.631596+01 | 2016-10-22 05:57:28.631596+02 | 2016-10-22 05:57:28.631596+02 | external   |    6055
   3 | t          | Cosyso         | Steinroytakavur    | cosyso.steinroytakavur@gecgipfor-global.com        | 2016-12-16 10:35:28.631596+01 | 2016-12-18 18:11:28.631596+01 | 2016-12-18 18:11:28.631596+01 | 2016-12-18 18:11:28.631596+01 | production |     651
   4 | t          | Michavir       | Ersteinotovur      | michavir.ersteinotovur@gefroca-international.com   | 2012-10-29 12:27:28.631596+01 | 2012-11-03 10:41:28.631596+01 | 2013-06-19 11:21:28.631596+02 | 2013-06-19 11:21:28.631596+02 | external   |    2731
   6 | t          | Ennathche      | Latakamcata        | ennathche.latakamcata@gecforgim-united.com         | 2016-12-15 12:29:28.631596+01 | 2016-12-19 11:12:28.631596+01 | 2017-06-27 18:39:28.631596+02 | 2017-06-27 18:39:28.631596+02 | external   |    8740
   8 | f          |                | Durjactakao'       | borob.durjactakao-@forfrafor-gmbh.com              | 2014-01-13 16:36:28.631596+01 | 2014-01-17 19:08:28.631596+01 | 2014-01-17 19:08:28.631596+01 | 2014-01-17 19:08:28.631596+01 | external   |    1902
   9 | t          | Jamibo         | Jacsteinlason      | jamibo.jacsteinlason@gimgipgim-international.com   | 2011-11-30 08:29:28.631596+01 |                               |                               | 2011-11-30 08:29:28.631596+01 | support    |    3024
  10 | t          | Nathhnnath     | Vurfürsteinking    | nathhnnath.vurfursteinking@sosegip-sons.com        | 2014-08-29 00:10:28.631596+02 | 2014-09-04 05:25:28.631596+02 | 2014-09-04 05:25:28.631596+02 | 2014-09-04 05:25:28.631596+02 | support    |    6006
  13 | t          | Chepeche       | Kleindurotoking    | chepeche.kleindurotoking@sogegec-global.com        | 2011-07-25 03:06:28.631596+02 | 2011-07-28 14:17:28.631596+02 | 2013-08-08 10:32:28.631596+02 | 2013-08-08 10:32:28.631596+02 | direction  |     477
(...)
</code></pre>

<p>We'll then need to insert those lines into the contact table. As we could see before on the above pseudo-query.
After the <code>WITH</code> section we have a <code>SELECT</code> query, the <code>INSERT INTO contact</code> part has to be paste just before this select.
At the end we have <a href="https://github.com/regilero/regilero.github.com/blob/master/theme/resource/pgserie/contacts_insertion.sql#L40-L52">this insert query</a>,
where we also add the <code>ON CONFLICT DO NOTHING;</code>.</p>

<p>Then I can insert <strong>1,000</strong>, <strong>10,000</strong> or <strong>100,000 contacts</strong> by simply altering the digits in the last <code>generate_series</code>.</p>

<p>For SQL Fiddle the model definition and these queries reached the size limit (8000)
so UI had to remove some indexes and some formating and comments, but <a href="http://sqlfiddle.com/#!17/93004/7">it works !</a></p>

<p>We can also <a href="http://sqlfiddle.com/#!17/93004/8">list some contacts</a>.</p>

<p>Or start to work on <a href="http://sqlfiddle.com/#!17/93004/6">some complex query from an application</a>.
<strong>Since the goal is normally to find the right indexes</strong>.</p>

<h2>Why, by the way?</h2>

<p>Generating datas based on a <strong>realistic physiognomy of data</strong> and on <strong>large assemblies</strong>
will help us validate an indexation scheme, and optimize explains.</p>

<p>The query shown in <a href="http://sqlfiddle.com/#!17/93004/6">this previous Fidlle</a> and also available <a href="https://github.com/regilero/regilero.github.com/blob/master/theme/resource/pgserie/query_example.sql">directly here</a> is quite awful to optimize, with <code>WINDOW</code> usage, some subselects, etc.</p>

<p><img src="http://regilero.github.io/theme/resource/pgserie/explain1.png"></p>

<p>On the other hand, depending on the presence or absence of certain indexes (like the dates partial indexes),
we can obtain some very different explain schemes:</p>

<p><img src="http://regilero.github.io/theme/resource/pgserie/explain2.png"></p>

<p>But that's another story.</p>

<h2>Bonus</h2>

<p>Of course variations on the examples can be made. Here is a link to a <a href="https://gist.github.com/regilero/e0066e66e2c505f7a0edddf8bf104bb7">hoity-toity french names generator</a>.</p>


          </div>
         </div>
        </div>
        <div class="tag">Tags:&nbsp;<i class="glyphicon glyphicon-tag"></i><a href="/tag/PostgreSQL/">PostgreSQL</a></div>
</article>
<hr/>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: * * */
    var disqus_shortname = "regilero";
    var disqus_identifier = '8dcfedce-aae4-3bfffd-986edab3535ebb050ac';
    var disqus_title = "PostgreSQL, advanced use of generate_series for data generation";
    var disqus_url = 'http://regilero.github.io/postgresql/english/2017/06/26/postgresql_advanced_generate_series/';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    

      </div>
      <div class="col-md-4" id="sideBar">

            <div id="sideBarContent"> 
              
              <div class="sideBarListBox">
                <div class="page-header">
                <h3>Related posts</h3>
                </div>
                <div class="list-group" role="navigation">
                  
                     <a class="list-group-item" href="/english/security/2018/07/03/security_pound_http_smuggling/">
                     <h4>Security: HTTP Smuggling, Apsis Pound load balancer</h4>
                     <p>details of CVE-2016-10711 (published feb 2018).</p>
                     </a>
                  
                     <a class="list-group-item" href="/security/english/2016/12/19/security_dompdf_rce/">
                     <h4>Web Security, Dompdf security issues details</h4>
                     <p>details of december 2015's 3 CVE in dompdf, with one RCE.</p>
                     </a>
                  
                     <a class="list-group-item" href="/security/english/2016/06/10/security_play_with_implicit_html_and_closing_divs/">
                     <h4>Web Security, using bad HTML to escape from a DIV</h4>
                     <p>Break HTML layouts with only bad HTML and the browser's help.</p>
                     </a>
                  
                     <a class="list-group-item" href="/security/english/2015/10/04/http_smuggling_in_2015_part_one/">
                     <h4>Checking HTTP Smuggling issues in 2015 - Part1</h4>
                     <p>First part of the 2015 HTTP Smuggling articles. Injecting HTTP in HTTP, the theory.</p>
                     </a>
                  
                     <a class="list-group-item" href="/security/english/2015/03/25/nginx-integer_truncation/">
                     <h4>Nginx Integer Truncation</h4>
                     <p>Exploitation of Integer Overflow with the HTTP Content length Header</p>
                     </a>
                  
                </div>
              </div>
              
      
              <div class="sideBarListBox">
                <div class="page-header">
                <h3>Latest posts</h3>
                </div>
                <div class="list-group" role="navigation">
                  
                     <a class="list-group-item" href="/english/security/2018/07/03/security_pound_http_smuggling/">
                     Security: HTTP Smuggling, Apsis Pound load balancer
                     </a>
                  
                     <a class="list-group-item" href="/postgresql/english/2017/06/26/postgresql_advanced_generate_series/">
                     PostgreSQL, advanced use of generate_series for data generation
                     </a>
                  
                     <a class="list-group-item" href="/security/english/2016/12/19/security_dompdf_rce/">
                     Web Security, Dompdf security issues details
                     </a>
                  
                     <a class="list-group-item" href="/security/english/2016/06/10/security_play_with_implicit_html_and_closing_divs/">
                     Web Security, using bad HTML to escape from a DIV
                     </a>
                  
                     <a class="list-group-item" href="/security/english/2015/10/04/http_smuggling_in_2015_part_one/">
                     Checking HTTP Smuggling issues in 2015 - Part1
                     </a>
                  
                </div>
              </div>
            
              <div class="sideBarListBox">
                <div class="page-header">
                <h3>Tags</h3>
                </div>

                <div class="tagcloud">
                <a style='font-size: 12px' class='taglink' href='/tag/Ajax/'>Ajax</a>
<a style='font-size: 12px' class='taglink' href='/tag/Bug/'>Bug</a>
<a style='font-size: 31px' class='taglink' href='/tag/PHP/'>PHP</a>
<a style='font-size: 12px' class='taglink' href='/tag/Js/'>Js</a>
<a style='font-size: 32px' class='taglink' href='/tag/Apache/'>Apache</a>
<a style='font-size: 18px' class='taglink' href='/tag/BlockReplace/'>BlockReplace</a>
<a style='font-size: 12px' class='taglink' href='/tag/Dojo/'>Dojo</a>
<a style='font-size: 12px' class='taglink' href='/tag/Monitoring/'>Monitoring</a>
<a style='font-size: 12px' class='taglink' href='/tag/js/'>js</a>
<a style='font-size: 31px' class='taglink' href='/tag/Drupal/'>Drupal</a>
<a style='font-size: 12px' class='taglink' href='/tag/HTML5/'>HTML5</a>
<a style='font-size: 12px' class='taglink' href='/tag/Linux/'>Linux</a>
<a style='font-size: 12px' class='taglink' href='/tag/HTML/'>HTML</a>
<a style='font-size: 22px' class='taglink' href='/tag/Nginx/'>Nginx</a>
<a style='font-size: 18px' class='taglink' href='/tag/Smuggling/'>Smuggling</a>
<a style='font-size: 32px' class='taglink' href='/tag/Security/'>Security</a>
<a style='font-size: 28px' class='taglink' href='/tag/Performance/'>Performance</a>
<a style='font-size: 12px' class='taglink' href='/tag/HAProxy/'>HAProxy</a>
<a style='font-size: 12px' class='taglink' href='/tag/Cache/'>Cache</a>
<a style='font-size: 12px' class='taglink' href='/tag/Pound/'>Pound</a>
<a style='font-size: 12px' class='taglink' href='/tag/Mongodb/'>Mongodb</a>
<a style='font-size: 12px' class='taglink' href='/tag/Bash/'>Bash</a>
<a style='font-size: 18px' class='taglink' href='/tag/RewriteMap/'>RewriteMap</a>
<a style='font-size: 18px' class='taglink' href='/tag/Web/'>Web</a>
<a style='font-size: 22px' class='taglink' href='/tag/PostgreSQL/'>PostgreSQL</a>
<a style='font-size: 18px' class='taglink' href='/tag/CVE/'>CVE</a>
<a style='font-size: 12px' class='taglink' href='/tag/Varnish/'>Varnish</a>
<a style='font-size: 12px' class='taglink' href='/tag/Statistics/'>Statistics</a>
<a style='font-size: 18px' class='taglink' href='/tag/Plone/'>Plone</a>
<a style='font-size: 22px' class='taglink' href='/tag/mod_rewrite/'>mod_rewrite</a>
<a style='font-size: 12px' class='taglink' href='/tag/ZendFramework/'>ZendFramework</a>
<a style='font-size: 18px' class='taglink' href='/tag/PHP-fpm/'>PHP-fpm</a>
<a style='font-size: 18px' class='taglink' href='/tag/APC/'>APC</a>
<a style='font-size: 18px' class='taglink' href='/tag/jinja/'>jinja</a>
<a style='font-size: 18px' class='taglink' href='/tag/Injection/'>Injection</a>
<a style='font-size: 22px' class='taglink' href='/tag/Proxy/'>Proxy</a>
<a style='font-size: 12px' class='taglink' href='/tag/Managed/'>Managed</a>
<a style='font-size: 24px' class='taglink' href='/tag/SaltStack/'>SaltStack</a>
<a style='font-size: 12px' class='taglink' href='/tag/Accumulated/'>Accumulated</a>
<a style='font-size: 30px' class='taglink' href='/tag/HTTP/'>HTTP</a>

                </div>
              </div>
          </div> <!-- end sideBarContent -->
            
            <div class="sideBarMore">
              <div class="page-header">
              <h3>About</h3>
              </div>
                <a href="https://twitter.com/regilero" target="_blank"><img src="/theme/img/twitter_thumb.png" width="48" height="48" alt="Twitter regilero" title="Twitter regilero"></a>
                <a href="https://github.com/regilero" target="_blank"><img src="/theme/img/github_thumb.png" width="48" height="48" alt="Github regilero" title="Github regilero"></a>
                <a href="https://plus.google.com/111280074129555323484?rel=author" target="_blank"><img src="/theme/img/google-plus-thumb.png" width="48" height="48" alt="G+" title="G+"></a>
                <a href="http://www.flickr.com/photos/regilero/" target="_blank"><img src="/theme/img/flickr_thumb.png" width="48" height="48" alt="Flickr photos" title="Flickr photos"></a>
                <a href="http://stackoverflow.com/users/550618/regilero" target="_blank"><img src="http://stackoverflow.com/users/flair/550618.png" width="208" height="58" alt="profile for regilero at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for regilero at Stack Overflow, Q&amp;A for professional and enthusiast programmers"></a>
                <a href="https://stackexchange.com/users/264377/regilero"  target="_blank"><img src="http://stackexchange.com/users/flair/264377.png?theme=clean" width="208" height="58" alt="profile for regilero on Stack Exchange, a network of free, community-driven Q&amp;A sites" title="profile for regilero on Stack Exchange, a network of free, community-driven Q&amp;A sites" /></a>
            </div>
            <div class="sideBarItem">
              <h3>Some Friends</h3>
                <ul>
                  <li><a class="effect" target="_blank" href="http://makina-corpus.com/blog/metier/actu-metier">Blogs Makina Corpus<div class="cover-right"><img src="/theme/img/makinaorg.png" height="30" width="30"><img src="/theme/img/makinaorg_banner.png" height="30" width="117"></div></a></li>
                  <li><a class="effect" target="_blank" href="http://www.makina-corpus.com">Makina Corpus<div class="cover-right"><img src="/theme/img/makinacom.png" height="30" width="30"><img src="/theme/img/makinacom_banner.png" height="30" width="117"></div></a></li>
                  <li><a class="effect" target="_blank" href="http://blog.processus.org/">Pounard, processus.org<div class="cover-right"><img src="/theme/img/pounard.png" height="30" width="30"><img src="/theme/img/pounard_banner.png" height="30" width="117"></div></a></li>
                  <li><a class="effect" target="_blank" href="http://toutpt.github.io/" >Toupt<div class="cover-right"><img src="/theme/img/toupt.png" height="30" width="30"><img src="/theme/img/toupt_banner.png" height="30" width="117"></div></a></li>
                  <li><a class="effect" target="_blank" href="http://francoisgaudin.com/">François Gaudin<div class="cover-right"><img src="/theme/img/gaudin.png" height="30" width="30"><img src="/theme/img/gaudin_banner.png" height="30" width="117"></div></a></li>
                  <li><a class="effect" target="_blank" href="http://fle.github.io/">Florent Lebreton<div class="cover-right"><img src="/theme/img/fle.png" height="30" width="30"><img src="/theme/img/fle_banner.png" height="30" width="117"></div></a></li>
                </ul>
                <div class="clear"></div>
            </div>
         </div> <!-- end sidebar -->
        
       </div><!-- end row -->
       <div class="row">
         <div class="col-md-12" id="footer">
           <div class="panel panel-default">
             <div class=panel-footer">
          <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/fr/"><img alt="Licence Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/fr/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">regilero's blog</span> est mis à disposition selon les termes de la <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/fr/">licence Creative Commons Attribution -  Partage dans les Mêmes Conditions 3.0 France</a>.<br />Fondé(e) sur une œuvre à <a xmlns:dct="http://purl.org/dc/terms/" href="http://regilero.github.io" rel="dct:source">http://regilero.github.io</a>.
              </div>
            </div>
         </div>
       </div><!-- end row -->
  </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<!--    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script> -->
    <script src="/theme/js/toc.min.js" ></script>
    <script src="/theme/js/effects.js" ></script>
   <script src="/theme/js/jquery.parallax.min.js"></script>
    <script src="/theme/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-40859893-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
    </body>
</html>
